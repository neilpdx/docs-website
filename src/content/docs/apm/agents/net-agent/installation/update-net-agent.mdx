---
title: Update the .NET agent
tags:
  - Agents
  - NET agent
  - Installation
translate:
  - jp
metaDescription: 'For New Relic .NET agent (Framework or Core): how to update the .NET agent.'
redirects:
  - /docs/agents/net-agent/installation/update-net-agent
  - /docs/dotnet/updating-the-net-agent
  - /docs/agents/net-agent/installation-and-configuration/updating-net-agent
  - /docs/agents/net-agent/installation-and-configuration/upgrading-net-agent
  - /docs/agents/net-agent/installation-configuration/upgrading-net-agent
  - /docs/agents/net-agent/troubleshooting/upgrading-legacy-net-agents
  - /docs/agents/net-agent/installation-configuration/net-agent-known-issues
  - /docs/agents/net-agent/installation-configuration/upgrade-net-agent
  - /docs/agents/net-agent/troubleshooting/upgrade-legacy-net-agents
  - /docs/agents/net-agent/installation/upgrade-legacy-net-agents
  - /docs/agents/net-agent/installation-configuration/update-net-agent
  - /docs/agents/net-agent/installation/upgrade-legacy-net-framework-agents
---

How to update the APM .NET agent.

## Check your .NET agent version [#your_version]

1. Refer to the [release notes](/docs/releases/dotnet/) to find the latest version of the agent.
2. Check the version of the .NET agent you currently have installed by using **Windows Programs and Features** or by using your Linux package manager.
3. Follow the update instructions for your agent:
   * [Windows](#updating_net)
   * [Linux](#updating_net_core)

## Update the .NET agent (Windows) [#updating_net]

<Callout variant="important">
  Before updating:

  * Updating the agent requires **Administrator** rights in your Windows admin group. For more information, see the [permissions documentation](/docs/agents/net-agent/getting-started/compatibility-requirements-net-framework-agent#user-rights).
  * If your .NET Framework agent version is lower than 7.0 or you are using .NET Framework version 4.0 or lower, see [Update legacy .NET agent](#updating_older_net).
</Callout>

<CollapserGroup>
  <Collapser
    id="update-framework-standard"
    title="Standard install"
  >
    1. Ensure that you have [.NET 4.5 or higher installed on your system](/docs/agents/net-agent/getting-started/compatibility-requirements-net-framework-agent#net-version).
    2. Stop IIS.
    3. Download and run the appropriate MSI install package for your [architecture](/docs/agents/net-agent/getting-started/compatibility-requirements-net-framework-agent#architecture):

       * [32-bit installer](http://download.newrelic.com/dot_net_agent/latest_release/NewRelicDotNetAgent_x86.msi)
       * [64-bit installer](http://download.newrelic.com/dot_net_agent/latest_release/NewRelicDotNetAgent_x64.msi)
    4. After the installer package finishes, start IIS.
  </Collapser>
</CollapserGroup>

## Update the .NET agent (Linux) [#updating_net_core]

<Callout variant="important">
  For .NET agent versions 10.0.0 or higher, the name of the package is `newrelic-dotnet-agent`. For .NET agent versions 9.9.0 or lower, the name of the package is `newrelic-netcore20-agent`.
  The rest of this document will refer to `newrelic-dotnet-agent`; replace this with the older name if you have an older agent version installed.
</Callout>

Use one of the following methods to update to the latest version of New Relic's .NET agent:

<CollapserGroup>
  <Collapser
    id="updating-core-zip"
    title="zip, tar.gz, deb file"
  >
    1. Shut down your application(s).
    2. Download and run the appropriate install file for your [architecture](/docs/agents/net-agent/getting-started/compatibility-requirements-net-core-agent#architecture) from the [download site](https://download.newrelic.com/dot_net_agent/latest_release/).
    3. Extract the downloaded zip file on top of the existing files.
    4. Restart your application(s).
  </Collapser>

  <Collapser
    id="yum"
    title="yum (CentOS, Oracle Linux, or RHEL)"
  >
    1. Shut down your application(s).
    2. Use the following to update the agent:

       ```bash
       sudo yum update newrelic-dotnet-agent
       ```
  </Collapser>

  <Collapser
    id="apt"
    title="apt (Debian, Linux Mint, or Ubuntu)"
  >
    1. Shut down your application(s).
    2. Use the following to get a list of available updates and install them:

       ```bash
       sudo apt-get update && sudo apt-get install --only-upgrade newrelic-dotnet-agent
       ```
  </Collapser>

  <Collapser
    id="rpm"
    title="rpm (CentOS, Oracle Linux, or RHEL)"
  >
    1. Shut down your application(s).
    2. Download and run the appropriate rpm file for your [architecture](/docs/agents/net-agent/getting-started/compatibility-requirements-net-core-agent#architecture) from the [download site](https://download.newrelic.com/dot_net_agent/latest_release/).
    3. Use the following to update the agent:

       ```bash
       sudo rpm -Uvh FILE_NAME.rpm
       ```
  </Collapser>
</CollapserGroup>

## Update older .NET Framework agents (lower than 7.0) [#updating_older_net]

If you are considering updating a .NET Framework agent version that is lower than 7.0, review the following notes. To see the agent version you have, see [Check agent version](#your_version). For a full list of agent changes, see the [.NET release notes](/docs/release-notes/agent-release-notes/net-release-notes).

<CollapserGroup>
  <Collapser
    id="old-framework-versions"
    title=".NET Framework legacy agent version details"
  >
    <Callout variant="important">
      To instrument applications targeting .NET Framework 4.0 or earlier, you must use a version of the .NET Framework agent prior to 7.0. See [support for .NET Frameworks 4.0 or earlier](http://docs.newrelic.com/docs/agents/net-agent/troubleshooting/technical-support-net-frameworks-40-or-earlier) for more information.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            If version is lower than...
          </th>

          <th>
            Do this...
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td id="70">
            7.0
          </td>

          <td>
            Version 7.0 and higher of the .NET Framework agent support applications that target .NET Framework 4.5 or higher.
          </td>
        </tr>

        <tr>
          <td id="612">
            6.12
          </td>

          <td>
            Versions 6.12 or higher do not support Windows Server 2003. If you require Windows Server 2003, use versions 6.11 or lower. For more information, get support at [support.newrelic.com](https://support.newrelic.com) or download the agent at [http://download.newrelic.com/](http://download.newrelic.com/)
          </td>
        </tr>

        <tr>
          <td id="611">
            6.11
          </td>

          <td>
            Previously, [database](/docs/apm/applications-menu/monitoring/databases-slow-queries-page) and [external](/docs/apm/applications-menu/monitoring/external-services-page) calls that occurred outside of a transaction would generate metrics that you could view in their respective pages in the APM UI. Now these metrics will not be displayed. In a non-web application these calls can be "wrapped" in a [custom transaction](/docs/agents/net-agent/instrumentation/net-custom-transactions) to be able to view their metrics.
          </td>
        </tr>

        <tr>
          <td id="60">
            6.0
          </td>

          <td>
            To get [async support](/docs/agents/net-agent/instrumentation/net-custom-transactions) if your .NET agent version is earlier than 6.0, do the following as applicable:

            1. Remove the following application setting in `newrelic.config` if it exists:

               ```xml
               <appSettings>
                 <add key="AsyncMode" value="false" />
               </appSettings>
               ```
            2. Ensure your app's host has .NET 4.5 or higher installed.
            3. Tell .NET to use the new ASP request processing pipeline by adding the following lines to your `web.config`:

               ```xml
               <configuration>
                 <appSettings>
                   <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
                 </appSettings>
               <configuration>
               ```

               OR

               Specify the .NET Framework version to be 4.5.2 or higher by adding the following lines to the `web.config`:

               ```xml
               <configuration>
                 <system.web>
                   <httpRuntime targetFramework="YOUR_TARGET_NET_VERSION" /> 
                 </system.web>
               <configuration>
               ```
          </td>
        </tr>

        <tr id="51">
          <td>
            5.1.72.0
          </td>
          
          <td>
          Upgrade the agent. .NET agents older than 5.1.72.0 are no longer allowed to post data to New Relic ingest systems.
          </td>
        </tr>

      </tbody>
    </table>
  </Collapser>
</CollapserGroup>
